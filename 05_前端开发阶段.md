# 「初见」APP 前端开发阶段任务文档

## 阶段概述

**时间周期**：第4-5月  
**主要目标**：完成移动端APP开发、用户界面实现、交互功能开发和前后端联调  
**交付成果**：完整的移动端应用、用户界面、交互功能、测试版本  
**技术栈**：React Native + TypeScript + Redux Toolkit + React Navigation

## 核心任务清单

### 1. 项目初始化与环境搭建

#### 1.1 React Native项目搭建
- [ ] **项目初始化**
  ```bash
  # 创建React Native项目
  npx react-native init FirstMomentsApp --template react-native-template-typescript
  
  # 项目目录结构
  FirstMomentsApp/
  ├── src/
  │   ├── components/      # 通用组件
  │   ├── screens/         # 页面组件
  │   ├── navigation/      # 导航配置
  │   ├── store/           # Redux状态管理
  │   ├── services/        # API服务
  │   ├── utils/           # 工具函数
  │   ├── hooks/           # 自定义Hooks
  │   ├── types/           # TypeScript类型
  │   ├── assets/          # 静态资源
  │   └── styles/          # 样式文件
  ├── android/             # Android原生代码
  ├── ios/                 # iOS原生代码
  └── __tests__/           # 测试文件
  ```

- [ ] **依赖包安装**
  ```json
  {
    "dependencies": {
      "react": "18.2.0",
      "react-native": "0.72.0",
      "@reduxjs/toolkit": "^1.9.5",
      "react-redux": "^8.1.1",
      "@react-navigation/native": "^6.1.7",
      "@react-navigation/stack": "^6.3.17",
      "@react-navigation/bottom-tabs": "^6.5.8",
      "@react-navigation/drawer": "^6.6.3",
      "react-native-screens": "^3.22.0",
      "react-native-safe-area-context": "^4.7.1",
      "react-native-gesture-handler": "^2.12.0",
      "react-native-reanimated": "^3.3.0",
      "react-native-vector-icons": "^10.0.0",
      "react-native-image-picker": "^5.6.0",
      "react-native-video": "^5.2.1",
      "react-native-maps": "^1.7.1",
      "react-native-geolocation-service": "^5.3.1",
      "react-native-async-storage": "^1.19.1",
      "react-native-keychain": "^8.1.2",
      "react-native-permissions": "^3.8.4",
      "react-native-push-notification": "^8.1.1",
      "axios": "^1.4.0",
      "date-fns": "^2.30.0",
      "react-hook-form": "^7.45.1",
      "yup": "^1.2.0"
    },
    "devDependencies": {
      "@types/react": "^18.2.14",
      "@types/react-native": "^0.72.2",
      "@typescript-eslint/eslint-plugin": "^5.61.0",
      "@typescript-eslint/parser": "^5.61.0",
      "eslint": "^8.44.0",
      "prettier": "^2.8.8",
      "jest": "^29.5.0",
      "@testing-library/react-native": "^12.1.2",
      "@testing-library/jest-native": "^5.4.2",
      "detox": "^20.9.0"
    }
  }
  ```

#### 1.2 开发环境配置
- [ ] **TypeScript配置**
  ```json
  // tsconfig.json
  {
    "extends": "@react-native/typescript-config/tsconfig.json",
    "compilerOptions": {
      "baseUrl": "./src",
      "paths": {
        "@/*": ["./*"],
        "@components/*": ["./components/*"],
        "@screens/*": ["./screens/*"],
        "@services/*": ["./services/*"],
        "@utils/*": ["./utils/*"],
        "@types/*": ["./types/*"],
        "@assets/*": ["./assets/*"]
      },
      "strict": true,
      "noImplicitAny": true,
      "strictNullChecks": true
    }
  }
  ```

- [ ] **ESLint和Prettier配置**
  ```json
  // .eslintrc.js
  module.exports = {
    root: true,
    extends: [
      '@react-native-community',
      '@typescript-eslint/recommended',
      'prettier'
    ],
    parser: '@typescript-eslint/parser',
    plugins: ['@typescript-eslint'],
    rules: {
      'react-native/no-inline-styles': 'warn',
      '@typescript-eslint/no-unused-vars': 'error',
      'react-hooks/exhaustive-deps': 'warn'
    }
  };
  ```

### 2. 状态管理与数据层

#### 2.1 Redux Store配置
- [ ] **Store配置**
  ```typescript
  // src/store/index.ts
  import { configureStore } from '@reduxjs/toolkit';
  import { persistStore, persistReducer } from 'redux-persist';
  import AsyncStorage from '@react-native-async-storage/async-storage';
  import { combineReducers } from '@reduxjs/toolkit';
  
  import authSlice from './slices/authSlice';
  import profileSlice from './slices/profileSlice';
  import achievementSlice from './slices/achievementSlice';
  import mapSlice from './slices/mapSlice';
  import uiSlice from './slices/uiSlice';
  
  const persistConfig = {
    key: 'root',
    storage: AsyncStorage,
    whitelist: ['auth', 'profile'] // 只持久化认证和档案数据
  };
  
  const rootReducer = combineReducers({
    auth: authSlice,
    profile: profileSlice,
    achievement: achievementSlice,
    map: mapSlice,
    ui: uiSlice
  });
  
  const persistedReducer = persistReducer(persistConfig, rootReducer);
  
  export const store = configureStore({
    reducer: persistedReducer,
    middleware: (getDefaultMiddleware) =>
      getDefaultMiddleware({
        serializableCheck: {
          ignoredActions: ['persist/PERSIST', 'persist/REHYDRATE']
        }
      })
  });
  
  export const persistor = persistStore(store);
  export type RootState = ReturnType<typeof store.getState>;
  export type AppDispatch = typeof store.dispatch;
  ```

- [ ] **认证状态管理**
  ```typescript
  // src/store/slices/authSlice.ts
  import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';
  import { authAPI } from '@services/authAPI';
  
  interface User {
    id: string;
    username: string;
    email: string;
    avatar?: string;
  }
  
  interface AuthState {
    user: User | null;
    token: string | null;
    isLoading: boolean;
    isAuthenticated: boolean;
    error: string | null;
  }
  
  const initialState: AuthState = {
    user: null,
    token: null,
    isLoading: false,
    isAuthenticated: false,
    error: null
  };
  
  // 异步登录
  export const loginAsync = createAsyncThunk(
    'auth/login',
    async (credentials: { email: string; password: string }, { rejectWithValue }) => {
      try {
        const response = await authAPI.login(credentials);
        return response.data;
      } catch (error: any) {
        return rejectWithValue(error.response?.data?.message || '登录失败');
      }
    }
  );
  
  // 异步注册
  export const registerAsync = createAsyncThunk(
    'auth/register',
    async (userData: { username: string; email: string; password: string }, { rejectWithValue }) => {
      try {
        const response = await authAPI.register(userData);
        return response.data;
      } catch (error: any) {
        return rejectWithValue(error.response?.data?.message || '注册失败');
      }
    }
  );
  
  const authSlice = createSlice({
    name: 'auth',
    initialState,
    reducers: {
      logout: (state) => {
        state.user = null;
        state.token = null;
        state.isAuthenticated = false;
        state.error = null;
      },
      clearError: (state) => {
        state.error = null;
      },
      updateUser: (state, action: PayloadAction<Partial<User>>) => {
        if (state.user) {
          state.user = { ...state.user, ...action.payload };
        }
      }
    },
    extraReducers: (builder) => {
      builder
        // 登录
        .addCase(loginAsync.pending, (state) => {
          state.isLoading = true;
          state.error = null;
        })
        .addCase(loginAsync.fulfilled, (state, action) => {
          state.isLoading = false;
          state.user = action.payload.user;
          state.token = action.payload.token;
          state.isAuthenticated = true;
        })
        .addCase(loginAsync.rejected, (state, action) => {
          state.isLoading = false;
          state.error = action.payload as string;
        })
        // 注册
        .addCase(registerAsync.pending, (state) => {
          state.isLoading = true;
          state.error = null;
        })
        .addCase(registerAsync.fulfilled, (state, action) => {
          state.isLoading = false;
          state.user = action.payload.user;
          state.token = action.payload.token;
          state.isAuthenticated = true;
        })
        .addCase(registerAsync.rejected, (state, action) => {
          state.isLoading = false;
          state.error = action.payload as string;
        });
    }
  });
  
  export const { logout, clearError, updateUser } = authSlice.actions;
  export default authSlice.reducer;
  ```

#### 2.2 API服务层
- [ ] **HTTP客户端配置**
  ```typescript
  // src/services/httpClient.ts
  import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';
  import AsyncStorage from '@react-native-async-storage/async-storage';
  import { store } from '@/store';
  import { logout } from '@/store/slices/authSlice';
  
  class HttpClient {
    private instance: AxiosInstance;
  
    constructor() {
      this.instance = axios.create({
        baseURL: __DEV__ ? 'http://localhost:3000/api/v1' : 'https://api.firstmoments.com/api/v1',
        timeout: 10000,
        headers: {
          'Content-Type': 'application/json'
        }
      });
  
      this.setupInterceptors();
    }
  
    private setupInterceptors() {
      // 请求拦截器
      this.instance.interceptors.request.use(
        async (config) => {
          const token = await AsyncStorage.getItem('token');
          if (token) {
            config.headers.Authorization = `Bearer ${token}`;
          }
          return config;
        },
        (error) => {
          return Promise.reject(error);
        }
      );
  
      // 响应拦截器
      this.instance.interceptors.response.use(
        (response: AxiosResponse) => {
          return response;
        },
        async (error) => {
          if (error.response?.status === 401) {
            // Token过期，清除认证状态
            await AsyncStorage.removeItem('token');
            store.dispatch(logout());
          }
          return Promise.reject(error);
        }
      );
    }
  
    async get<T>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {
      return this.instance.get(url, config);
    }
  
    async post<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {
      return this.instance.post(url, data, config);
    }
  
    async put<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {
      return this.instance.put(url, data, config);
    }
  
    async delete<T>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {
      return this.instance.delete(url, config);
    }
  }
  
  export const httpClient = new HttpClient();
  ```

- [ ] **API服务封装**
  ```typescript
  // src/services/authAPI.ts
  import { httpClient } from './httpClient';
  
  export interface LoginRequest {
    email: string;
    password: string;
  }
  
  export interface RegisterRequest {
    username: string;
    email: string;
    password: string;
  }
  
  export interface AuthResponse {
    success: boolean;
    data: {
      user: {
        id: string;
        username: string;
        email: string;
        avatar?: string;
      };
      token: string;
      profiles?: any[];
    };
    message: string;
  }
  
  export const authAPI = {
    login: (credentials: LoginRequest) => 
      httpClient.post<AuthResponse>('/auth/login', credentials),
  
    register: (userData: RegisterRequest) => 
      httpClient.post<AuthResponse>('/auth/register', userData),
  
    refreshToken: () => 
      httpClient.post<AuthResponse>('/auth/refresh'),
  
    logout: () => 
      httpClient.post('/auth/logout'),
  
    forgotPassword: (email: string) => 
      httpClient.post('/auth/forgot-password', { email }),
  
    resetPassword: (token: string, password: string) => 
      httpClient.post('/auth/reset-password', { token, password })
  };
  ```

### 3. 导航系统设计

#### 3.1 导航结构配置
- [ ] **主导航配置**
  ```typescript
  // src/navigation/AppNavigator.tsx
  import React from 'react';
  import { NavigationContainer } from '@react-navigation/native';
  import { createStackNavigator } from '@react-navigation/stack';
  import { useSelector } from 'react-redux';
  import { RootState } from '@/store';
  
  import AuthNavigator from './AuthNavigator';
  import MainNavigator from './MainNavigator';
  import LoadingScreen from '@screens/LoadingScreen';
  
  const Stack = createStackNavigator();
  
  const AppNavigator: React.FC = () => {
    const { isAuthenticated, isLoading } = useSelector((state: RootState) => state.auth);
  
    if (isLoading) {
      return <LoadingScreen />;
    }
  
    return (
      <NavigationContainer>
        <Stack.Navigator screenOptions={{ headerShown: false }}>
          {isAuthenticated ? (
            <Stack.Screen name="Main" component={MainNavigator} />
          ) : (
            <Stack.Screen name="Auth" component={AuthNavigator} />
          )}
        </Stack.Navigator>
      </NavigationContainer>
    );
  };
  
  export default AppNavigator;
  ```

- [ ] **底部标签导航**
  ```typescript
  // src/navigation/MainNavigator.tsx
  import React from 'react';
  import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';
  import { createStackNavigator } from '@react-navigation/stack';
  import Icon from 'react-native-vector-icons/MaterialIcons';
  
  import HomeScreen from '@screens/Home/HomeScreen';
  import ProfileListScreen from '@screens/Profile/ProfileListScreen';
  import AchievementScreen from '@screens/Achievement/AchievementScreen';
  import MapScreen from '@screens/Map/MapScreen';
  import SettingsScreen from '@screens/Settings/SettingsScreen';
  
  const Tab = createBottomTabNavigator();
  const Stack = createStackNavigator();
  
  const MainNavigator: React.FC = () => {
    return (
      <Tab.Navigator
        screenOptions={({ route }) => ({
          tabBarIcon: ({ focused, color, size }) => {
            let iconName: string;
  
            switch (route.name) {
              case 'Home':
                iconName = 'home';
                break;
              case 'Profiles':
                iconName = 'people';
                break;
              case 'Achievements':
                iconName = 'emoji-events';
                break;
              case 'Map':
                iconName = 'map';
                break;
              case 'Settings':
                iconName = 'settings';
                break;
              default:
                iconName = 'help';
            }
  
            return <Icon name={iconName} size={size} color={color} />;
          },
          tabBarActiveTintColor: '#FF6B6B',
          tabBarInactiveTintColor: '#8E8E93',
          headerShown: false
        })}
      >
        <Tab.Screen 
          name="Home" 
          component={HomeScreen} 
          options={{ tabBarLabel: '首页' }}
        />
        <Tab.Screen 
          name="Profiles" 
          component={ProfileListScreen} 
          options={{ tabBarLabel: '档案' }}
        />
        <Tab.Screen 
          name="Achievements" 
          component={AchievementScreen} 
          options={{ tabBarLabel: '成就' }}
        />
        <Tab.Screen 
          name="Map" 
          component={MapScreen} 
          options={{ tabBarLabel: '足迹' }}
        />
        <Tab.Screen 
          name="Settings" 
          component={SettingsScreen} 
          options={{ tabBarLabel: '设置' }}
        />
      </Tab.Navigator>
    );
  };
  
  export default MainNavigator;
  ```

### 4. 核心页面开发

#### 4.1 认证页面
- [ ] **登录页面**
  ```typescript
  // src/screens/Auth/LoginScreen.tsx
  import React, { useState } from 'react';
  import {
    View,
    Text,
    TextInput,
    TouchableOpacity,
    StyleSheet,
    Alert,
    KeyboardAvoidingView,
    Platform
  } from 'react-native';
  import { useDispatch, useSelector } from 'react-redux';
  import { useForm, Controller } from 'react-hook-form';
  import { yupResolver } from '@hookform/resolvers/yup';
  import * as yup from 'yup';
  
  import { AppDispatch, RootState } from '@/store';
  import { loginAsync, clearError } from '@/store/slices/authSlice';
  import LoadingButton from '@components/LoadingButton';
  import InputField from '@components/InputField';
  
  const schema = yup.object({
    email: yup.string().email('请输入有效的邮箱地址').required('邮箱不能为空'),
    password: yup.string().min(6, '密码至少6位').required('密码不能为空')
  });
  
  interface LoginFormData {
    email: string;
    password: string;
  }
  
  const LoginScreen: React.FC = ({ navigation }: any) => {
    const dispatch = useDispatch<AppDispatch>();
    const { isLoading, error } = useSelector((state: RootState) => state.auth);
  
    const { control, handleSubmit, formState: { errors } } = useForm<LoginFormData>({
      resolver: yupResolver(schema)
    });
  
    const onSubmit = async (data: LoginFormData) => {
      try {
        await dispatch(loginAsync(data)).unwrap();
      } catch (error) {
        Alert.alert('登录失败', error as string);
      }
    };
  
    React.useEffect(() => {
      return () => {
        dispatch(clearError());
      };
    }, [dispatch]);
  
    return (
      <KeyboardAvoidingView 
        style={styles.container} 
        behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
      >
        <View style={styles.content}>
          <Text style={styles.title}>欢迎回来</Text>
          <Text style={styles.subtitle}>登录您的初见账户</Text>
  
          <View style={styles.form}>
            <Controller
              control={control}
              name="email"
              render={({ field: { onChange, onBlur, value } }) => (
                <InputField
                  label="邮箱"
                  placeholder="请输入邮箱地址"
                  value={value}
                  onChangeText={onChange}
                  onBlur={onBlur}
                  error={errors.email?.message}
                  keyboardType="email-address"
                  autoCapitalize="none"
                />
              )}
            />
  
            <Controller
              control={control}
              name="password"
              render={({ field: { onChange, onBlur, value } }) => (
                <InputField
                  label="密码"
                  placeholder="请输入密码"
                  value={value}
                  onChangeText={onChange}
                  onBlur={onBlur}
                  error={errors.password?.message}
                  secureTextEntry
                />
              )}
            />
  
            <TouchableOpacity 
              style={styles.forgotPassword}
              onPress={() => navigation.navigate('ForgotPassword')}
            >
              <Text style={styles.forgotPasswordText}>忘记密码？</Text>
            </TouchableOpacity>
  
            <LoadingButton
              title="登录"
              onPress={handleSubmit(onSubmit)}
              loading={isLoading}
              style={styles.loginButton}
            />
          </View>
  
          <View style={styles.footer}>
            <Text style={styles.footerText}>还没有账户？</Text>
            <TouchableOpacity onPress={() => navigation.navigate('Register')}>
              <Text style={styles.registerLink}>立即注册</Text>
            </TouchableOpacity>
          </View>
        </View>
      </KeyboardAvoidingView>
    );
  };
  
  const styles = StyleSheet.create({
    container: {
      flex: 1,
      backgroundColor: '#FFFFFF'
    },
    content: {
      flex: 1,
      paddingHorizontal: 24,
      justifyContent: 'center'
    },
    title: {
      fontSize: 32,
      fontWeight: 'bold',
      color: '#1A1A1A',
      textAlign: 'center',
      marginBottom: 8
    },
    subtitle: {
      fontSize: 16,
      color: '#8E8E93',
      textAlign: 'center',
      marginBottom: 40
    },
    form: {
      marginBottom: 32
    },
    forgotPassword: {
      alignSelf: 'flex-end',
      marginTop: 8,
      marginBottom: 24
    },
    forgotPasswordText: {
      fontSize: 14,
      color: '#FF6B6B'
    },
    loginButton: {
      backgroundColor: '#FF6B6B',
      borderRadius: 12,
      height: 50
    },
    footer: {
      flexDirection: 'row',
      justifyContent: 'center',
      alignItems: 'center'
    },
    footerText: {
      fontSize: 14,
      color: '#8E8E93'
    },
    registerLink: {
      fontSize: 14,
      color: '#FF6B6B',
      fontWeight: '600',
      marginLeft: 4
    }
  });
  
  export default LoginScreen;
  ```

#### 4.2 档案管理页面
- [ ] **档案列表页面**
  ```typescript
  // src/screens/Profile/ProfileListScreen.tsx
  import React, { useEffect } from 'react';
  import {
    View,
    Text,
    FlatList,
    TouchableOpacity,
    StyleSheet,
    Image,
    RefreshControl
  } from 'react-native';
  import { useDispatch, useSelector } from 'react-redux';
  import Icon from 'react-native-vector-icons/MaterialIcons';
  
  import { AppDispatch, RootState } from '@/store';
  import { fetchProfilesAsync } from '@/store/slices/profileSlice';
  import ProfileCard from '@components/ProfileCard';
  import FloatingActionButton from '@components/FloatingActionButton';
  
  const ProfileListScreen: React.FC = ({ navigation }: any) => {
    const dispatch = useDispatch<AppDispatch>();
    const { profiles, isLoading } = useSelector((state: RootState) => state.profile);
  
    useEffect(() => {
      dispatch(fetchProfilesAsync());
    }, [dispatch]);
  
    const onRefresh = () => {
      dispatch(fetchProfilesAsync());
    };
  
    const renderProfile = ({ item }: { item: any }) => (
      <ProfileCard
        profile={item}
        onPress={() => navigation.navigate('ProfileDetail', { profileId: item.id })}
        onEdit={() => navigation.navigate('EditProfile', { profileId: item.id })}
      />
    );
  
    return (
      <View style={styles.container}>
        <View style={styles.header}>
          <Text style={styles.title}>我的档案</Text>
          <TouchableOpacity 
            style={styles.searchButton}
            onPress={() => navigation.navigate('SearchProfiles')}
          >
            <Icon name="search" size={24} color="#8E8E93" />
          </TouchableOpacity>
        </View>
  
        <FlatList
          data={profiles}
          renderItem={renderProfile}
          keyExtractor={(item) => item.id}
          contentContainerStyle={styles.list}
          refreshControl={
            <RefreshControl refreshing={isLoading} onRefresh={onRefresh} />
          }
          showsVerticalScrollIndicator={false}
        />
  
        <FloatingActionButton
          onPress={() => navigation.navigate('CreateProfile')}
          icon="add"
        />
      </View>
    );
  };
  
  const styles = StyleSheet.create({
    container: {
      flex: 1,
      backgroundColor: '#F8F9FA'
    },
    header: {
      flexDirection: 'row',
      justifyContent: 'space-between',
      alignItems: 'center',
      paddingHorizontal: 20,
      paddingTop: 60,
      paddingBottom: 20,
      backgroundColor: '#FFFFFF'
    },
    title: {
      fontSize: 28,
      fontWeight: 'bold',
      color: '#1A1A1A'
    },
    searchButton: {
      padding: 8
    },
    list: {
      padding: 16
    }
  });
  
  export default ProfileListScreen;
  ```

#### 4.3 成就系统页面
- [ ] **成就列表页面**
  ```typescript
  // src/screens/Achievement/AchievementScreen.tsx
  import React, { useState, useEffect } from 'react';
  import {
    View,
    Text,
    FlatList,
    TouchableOpacity,
    StyleSheet,
    ScrollView
  } from 'react-native';
  import { useDispatch, useSelector } from 'react-redux';
  
  import { AppDispatch, RootState } from '@/store';
  import { fetchAchievementsAsync, fetchUserAchievementsAsync } from '@/store/slices/achievementSlice';
  import AchievementCard from '@components/AchievementCard';
  import CategoryFilter from '@components/CategoryFilter';
  import SearchBar from '@components/SearchBar';
  
  const categories = [
    { id: 'all', name: '全部', icon: 'apps' },
    { id: 'first_time', name: '第一次', icon: 'star' },
    { id: 'growth', name: '成长', icon: 'trending-up' },
    { id: 'learning', name: '学习', icon: 'school' },
    { id: 'sports', name: '运动', icon: 'fitness-center' },
    { id: 'travel', name: '旅行', icon: 'flight' },
    { id: 'social', name: '社交', icon: 'people' }
  ];
  
  const AchievementScreen: React.FC = ({ navigation }: any) => {
    const dispatch = useDispatch<AppDispatch>();
    const { achievements, userAchievements, isLoading } = useSelector(
      (state: RootState) => state.achievement
    );
    const { currentProfile } = useSelector((state: RootState) => state.profile);
  
    const [selectedCategory, setSelectedCategory] = useState('all');
    const [searchQuery, setSearchQuery] = useState('');
    const [viewMode, setViewMode] = useState<'available' | 'unlocked'>('available');
  
    useEffect(() => {
      dispatch(fetchAchievementsAsync({ category: selectedCategory }));
      if (currentProfile) {
        dispatch(fetchUserAchievementsAsync({ profileId: currentProfile.id }));
      }
    }, [dispatch, selectedCategory, currentProfile]);
  
    const filteredAchievements = achievements.filter(achievement => {
      const matchesSearch = achievement.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                           achievement.description.toLowerCase().includes(searchQuery.toLowerCase());
      return matchesSearch;
    });
  
    const renderAchievement = ({ item }: { item: any }) => {
      const isUnlocked = userAchievements.some(ua => ua.achievementId === item.id);
      
      return (
        <AchievementCard
          achievement={item}
          isUnlocked={isUnlocked}
          onPress={() => {
            if (isUnlocked) {
              navigation.navigate('AchievementDetail', { achievementId: item.id });
            } else {
              navigation.navigate('UnlockAchievement', { achievementId: item.id });
            }
          }}
        />
      );
    };
  
    const renderUserAchievement = ({ item }: { item: any }) => (
      <AchievementCard
        achievement={item}
        isUnlocked={true}
        userAchievement={item}
        onPress={() => navigation.navigate('AchievementDetail', { 
          achievementId: item.achievementId,
          userAchievementId: item.id 
        })}
      />
    );
  
    return (
      <View style={styles.container}>
        <View style={styles.header}>
          <Text style={styles.title}>成就系统</Text>
          
          <View style={styles.viewModeToggle}>
            <TouchableOpacity
              style={[styles.toggleButton, viewMode === 'available' && styles.activeToggle]}
              onPress={() => setViewMode('available')}
            >
              <Text style={[styles.toggleText, viewMode === 'available' && styles.activeToggleText]}>
                可点亮
              </Text>
            </TouchableOpacity>
            <TouchableOpacity
              style={[styles.toggleButton, viewMode === 'unlocked' && styles.activeToggle]}
              onPress={() => setViewMode('unlocked')}
            >
              <Text style={[styles.toggleText, viewMode === 'unlocked' && styles.activeToggleText]}>
                已点亮
              </Text>
            </TouchableOpacity>
          </View>
        </View>
  
        <SearchBar
          value={searchQuery}
          onChangeText={setSearchQuery}
          placeholder="搜索成就..."
          style={styles.searchBar}
        />
  
        <ScrollView 
          horizontal 
          showsHorizontalScrollIndicator={false}
          style={styles.categoryContainer}
        >
          {categories.map(category => (
            <CategoryFilter
              key={category.id}
              category={category}
              isSelected={selectedCategory === category.id}
              onPress={() => setSelectedCategory(category.id)}
            />
          ))}
        </ScrollView>
  
        <FlatList
          data={viewMode === 'available' ? filteredAchievements : userAchievements}
          renderItem={viewMode === 'available' ? renderAchievement : renderUserAchievement}
          keyExtractor={(item) => item.id}
          contentContainerStyle={styles.list}
          numColumns={2}
          columnWrapperStyle={styles.row}
          showsVerticalScrollIndicator={false}
        />
      </View>
    );
  };
  
  const styles = StyleSheet.create({
    container: {
      flex: 1,
      backgroundColor: '#F8F9FA'
    },
    header: {
      flexDirection: 'row',
      justifyContent: 'space-between',
      alignItems: 'center',
      paddingHorizontal: 20,
      paddingTop: 60,
      paddingBottom: 20,
      backgroundColor: '#FFFFFF'
    },
    title: {
      fontSize: 28,
      fontWeight: 'bold',
      color: '#1A1A1A'
    },
    viewModeToggle: {
      flexDirection: 'row',
      backgroundColor: '#F0F0F0',
      borderRadius: 20,
      padding: 2
    },
    toggleButton: {
      paddingHorizontal: 16,
      paddingVertical: 8,
      borderRadius: 18
    },
    activeToggle: {
      backgroundColor: '#FF6B6B'
    },
    toggleText: {
      fontSize: 14,
      color: '#8E8E93'
    },
    activeToggleText: {
      color: '#FFFFFF',
      fontWeight: '600'
    },
    searchBar: {
      margin: 16
    },
    categoryContainer: {
      paddingHorizontal: 16,
      marginBottom: 16
    },
    list: {
      padding: 16
    },
    row: {
      justifyContent: 'space-between'
    }
  });
  
  export default AchievementScreen;
  ```

#### 4.4 地图足迹页面
- [ ] **地图页面**
  ```typescript
  // src/screens/Map/MapScreen.tsx
  import React, { useState, useEffect } from 'react';
  import {
    View,
    Text,
    StyleSheet,
    TouchableOpacity,
    Modal,
    Alert
  } from 'react-native';
  import MapView, { Marker, PROVIDER_GOOGLE } from 'react-native-maps';
  import Geolocation from 'react-native-geolocation-service';
  import { request, PERMISSIONS, RESULTS } from 'react-native-permissions';
  import Icon from 'react-native-vector-icons/MaterialIcons';
  import { useDispatch, useSelector } from 'react-redux';
  
  import { AppDispatch, RootState } from '@/store';
  import { fetchMapDataAsync, createCheckinAsync } from '@/store/slices/mapSlice';
  import CheckinModal from '@components/CheckinModal';
  import MapStatsPanel from '@components/MapStatsPanel';
  
  const MapScreen: React.FC = ({ navigation }: any) => {
    const dispatch = useDispatch<AppDispatch>();
    const { checkins, stats, isLoading } = useSelector((state: RootState) => state.map);
    const { currentProfile } = useSelector((state: RootState) => state.profile);
  
    const [currentLocation, setCurrentLocation] = useState<{
      latitude: number;
      longitude: number;
    } | null>(null);
    const [mapType, setMapType] = useState<'world' | 'china'>('china');
    const [showCheckinModal, setShowCheckinModal] = useState(false);
    const [selectedLocation, setSelectedLocation] = useState<any>(null);
    const [showStatsPanel, setShowStatsPanel] = useState(false);
  
    useEffect(() => {
      requestLocationPermission();
      if (currentProfile) {
        dispatch(fetchMapDataAsync({ 
          profileId: currentProfile.id, 
          mapType 
        }));
      }
    }, [dispatch, currentProfile, mapType]);
  
    const requestLocationPermission = async () => {
      try {
        const result = await request(
          Platform.OS === 'ios' 
            ? PERMISSIONS.IOS.LOCATION_WHEN_IN_USE 
            : PERMISSIONS.ANDROID.ACCESS_FINE_LOCATION
        );
  
        if (result === RESULTS.GRANTED) {
          getCurrentLocation();
        } else {
          Alert.alert('权限提示', '需要位置权限来显示您的当前位置');
        }
      } catch (error) {
        console.error('位置权限请求失败:', error);
      }
    };
  
    const getCurrentLocation = () => {
      Geolocation.getCurrentPosition(
        (position) => {
          setCurrentLocation({
            latitude: position.coords.latitude,
            longitude: position.coords.longitude
          });
        },
        (error) => {
          console.error('获取位置失败:', error);
        },
        { enableHighAccuracy: true, timeout: 15000, maximumAge: 10000 }
      );
    };
  
    const handleMapPress = (event: any) => {
      const { coordinate } = event.nativeEvent;
      setSelectedLocation(coordinate);
      setShowCheckinModal(true);
    };
  
    const handleCheckin = async (checkinData: any) => {
      try {
        await dispatch(createCheckinAsync({
          profileId: currentProfile.id,
          ...checkinData,
          coordinates: selectedLocation
        })).unwrap();
        
        setShowCheckinModal(false);
        Alert.alert('成功', '打卡成功！');
      } catch (error) {
        Alert.alert('失败', '打卡失败，请重试');
      }
    };
  
    return (
      <View style={styles.container}>
        <View style={styles.header}>
          <Text style={styles.title}>我的足迹</Text>
          
          <View style={styles.headerButtons}>
            <TouchableOpacity
              style={styles.headerButton}
              onPress={() => setShowStatsPanel(true)}
            >
              <Icon name="bar-chart" size={24} color="#FF6B6B" />
            </TouchableOpacity>
            
            <TouchableOpacity
              style={styles.headerButton}
              onPress={() => setMapType(mapType === 'world' ? 'china' : 'world')}
            >
              <Icon name="public" size={24} color="#FF6B6B" />
            </TouchableOpacity>
          </View>
        </View>
  
        <MapView
          provider={PROVIDER_GOOGLE}
          style={styles.map}
          initialRegion={{
            latitude: currentLocation?.latitude || 39.9042,
            longitude: currentLocation?.longitude || 116.4074,
            latitudeDelta: 0.0922,
            longitudeDelta: 0.0421
          }}
          onPress={handleMapPress}
          showsUserLocation={true}
          showsMyLocationButton={true}
        >
          {checkins.map((checkin) => (
            <Marker
              key={checkin.id}
              coordinate={{
                latitude: checkin.coordinates.latitude,
                longitude: checkin.coordinates.longitude
              }}
              title={checkin.name}
              description={checkin.description}
              pinColor={getMarkerColor(checkin.type)}
            />
          ))}
        </MapView>
  
        <TouchableOpacity
          style={styles.currentLocationButton}
          onPress={getCurrentLocation}
        >
          <Icon name="my-location" size={24} color="#FFFFFF" />
        </TouchableOpacity>
  
        <CheckinModal
          visible={showCheckinModal}
          onClose={() => setShowCheckinModal(false)}
          onSubmit={handleCheckin}
          location={selectedLocation}
        />
  
        <MapStatsPanel
          visible={showStatsPanel}
          onClose={() => setShowStatsPanel(false)}
          stats={stats}
          onViewDetails={() => {
            setShowStatsPanel(false);
            navigation.navigate('FootprintList');
          }}
        />
      </View>
    );
  };
  
  const getMarkerColor = (type: string) => {
    switch (type) {
      case 'country': return '#FF6B6B';
      case 'province': return '#4ECDC4';
      case 'city': return '#45B7D1';
      case 'landmark': return '#96CEB4';
      default: return '#FF6B6B';
    }
  };
  
  const styles = StyleSheet.create({
    container: {
      flex: 1
    },
    header: {
      flexDirection: 'row',
      justifyContent: 'space-between',
      alignItems: 'center',
      paddingHorizontal: 20,
      paddingTop: 60,
      paddingBottom: 20,
      backgroundColor: '#FFFFFF',
      zIndex: 1
    },
    title: {
      fontSize: 28,
      fontWeight: 'bold',
      color: '#1A1A1A'
    },
    headerButtons: {
      flexDirection: 'row'
    },
    headerButton: {
      marginLeft: 16,
      padding: 8
    },
    map: {
      flex: 1
    },
    currentLocationButton: {
      position: 'absolute',
      bottom: 30,
      right: 20,
      width: 56,
      height: 56,
      borderRadius: 28,
      backgroundColor: '#FF6B6B',
      justifyContent: 'center',
      alignItems: 'center',
      elevation: 8,
      shadowColor: '#000',
      shadowOffset: { width: 0, height: 2 },
      shadowOpacity: 0.25,
      shadowRadius: 3.84
    }
  });
  
  export default MapScreen;
  ```

### 5. 通用组件开发

#### 5.1 基础组件
- [ ] **输入框组件**
  ```typescript
  // src/components/InputField.tsx
  import React, { useState } from 'react';
  import {
    View,
    Text,
    TextInput,
    TouchableOpacity,
    StyleSheet,
    TextInputProps
  } from 'react-native';
  import Icon from 'react-native-vector-icons/MaterialIcons';
  
  interface InputFieldProps extends TextInputProps {
    label?: string;
    error?: string;
    leftIcon?: string;
    rightIcon?: string;
    onRightIconPress?: () => void;
  }
  
  const InputField: React.FC<InputFieldProps> = ({
    label,
    error,
    leftIcon,
    rightIcon,
    onRightIconPress,
    style,
    ...props
  }) => {
    const [isFocused, setIsFocused] = useState(false);
  
    return (
      <View style={[styles.container, style]}>
        {label && <Text style={styles.label}>{label}</Text>}
        
        <View style={[
          styles.inputContainer,
          isFocused && styles.focusedContainer,
          error && styles.errorContainer
        ]}>
          {leftIcon && (
            <Icon name={leftIcon} size={20} color="#8E8E93" style={styles.leftIcon} />
          )}
          
          <TextInput
            style={[styles.input, leftIcon && styles.inputWithLeftIcon]}
            onFocus={() => setIsFocused(true)}
            onBlur={() => setIsFocused(false)}
            placeholderTextColor="#C7C7CC"
            {...props}
          />
          
          {rightIcon && (
            <TouchableOpacity onPress={onRightIconPress} style={styles.rightIcon}>
              <Icon name={rightIcon} size={20} color="#8E8E93" />
            </TouchableOpacity>
          )}
        </View>
        
        {error && <Text style={styles.errorText}>{error}</Text>}
      </View>
    );
  };
  
  const styles = StyleSheet.create({
    container: {
      marginBottom: 16
    },
    label: {
      fontSize: 14,
      fontWeight: '600',
      color: '#1A1A1A',
      marginBottom: 8
    },
    inputContainer: {
      flexDirection: 'row',
      alignItems: 'center',
      borderWidth: 1,
      borderColor: '#E5E5EA',
      borderRadius: 12,
      backgroundColor: '#FFFFFF'
    },
    focusedContainer: {
      borderColor: '#FF6B6B'
    },
    errorContainer: {
      borderColor: '#FF3B30'
    },
    input: {
      flex: 1,
      height: 50,
      paddingHorizontal: 16,
      fontSize: 16,
      color: '#1A1A1A'
    },
    inputWithLeftIcon: {
      paddingLeft: 8
    },
    leftIcon: {
      marginLeft: 16
    },
    rightIcon: {
      padding: 16
    },
    errorText: {
      fontSize: 12,
      color: '#FF3B30',
      marginTop: 4,
      marginLeft: 4
    }
  });
  
  export default InputField;
  ```

- [ ] **加载按钮组件**
  ```typescript
  // src/components/LoadingButton.tsx
  import React from 'react';
  import {
    TouchableOpacity,
    Text,
    ActivityIndicator,
    StyleSheet,
    ViewStyle,
    TextStyle
  } from 'react-native';
  
  interface LoadingButtonProps {
    title: string;
    onPress: () => void;
    loading?: boolean;
    disabled?: boolean;
    style?: ViewStyle;
    textStyle?: TextStyle;
    loadingColor?: string;
  }
  
  const LoadingButton: React.FC<LoadingButtonProps> = ({
    title,
    onPress,
    loading = false,
    disabled = false,
    style,
    textStyle,
    loadingColor = '#FFFFFF'
  }) => {
    const isDisabled = loading || disabled;
  
    return (
      <TouchableOpacity
        style={[
          styles.button,
          isDisabled && styles.disabledButton,
          style
        ]}
        onPress={onPress}
        disabled={isDisabled}
        activeOpacity={0.8}
      >
        {loading ? (
          <ActivityIndicator size="small" color={loadingColor} />
        ) : (
          <Text style={[styles.buttonText, textStyle]}>{title}</Text>
        )}
      </TouchableOpacity>
    );
  };
  
  const styles = StyleSheet.create({
    button: {
      height: 50,
      borderRadius: 12,
      backgroundColor: '#FF6B6B',
      justifyContent: 'center',
      alignItems: 'center',
      shadowColor: '#FF6B6B',
      shadowOffset: { width: 0, height: 4 },
      shadowOpacity: 0.3,
      shadowRadius: 8,
      elevation: 8
    },
    disabledButton: {
      backgroundColor: '#C7C7CC',
      shadowOpacity: 0
    },
    buttonText: {
      fontSize: 16,
      fontWeight: '600',
      color: '#FFFFFF'
    }
  });
  
  export default LoadingButton;
  ```

### 6. 性能优化

#### 6.1 图片优化
- [ ] **图片缓存和压缩**
  ```typescript
  // src/utils/imageUtils.ts
  import { Image } from 'react-native';
  import ImageResizer from 'react-native-image-resizer';
  
  export class ImageUtils {
    // 压缩图片
    static async compressImage(
      uri: string,
      maxWidth: number = 1080,
      maxHeight: number = 1080,
      quality: number = 80
    ): Promise<string> {
      try {
        const response = await ImageResizer.createResizedImage(
          uri,
          maxWidth,
          maxHeight,
          'JPEG',
          quality,
          0,
          undefined,
          false,
          {
            mode: 'contain',
            onlyScaleDown: true
          }
        );
        return response.uri;
      } catch (error) {
        console.error('图片压缩失败:', error);
        return uri;
      }
    }
  
    // 预加载图片
    static preloadImages(imageUris: string[]): Promise<void[]> {
      return Promise.all(
        imageUris.map(uri => 
          Image.prefetch(uri).catch(error => {
            console.warn('图片预加载失败:', uri, error);
          })
        )
      );
    }
  
    // 获取图片尺寸
    static getImageSize(uri: string): Promise<{ width: number; height: number }> {
      return new Promise((resolve, reject) => {
        Image.getSize(
          uri,
          (width, height) => resolve({ width, height }),
          reject
        );
      });
    }
  }
  ```

#### 6.2 列表优化
- [ ] **虚拟化列表组件**
  ```typescript
  // src/components/OptimizedFlatList.tsx
  import React, { memo, useCallback } from 'react';
  import { FlatList, FlatListProps } from 'react-native';
  
  interface OptimizedFlatListProps<T> extends FlatListProps<T> {
    data: T[];
    renderItem: ({ item, index }: { item: T; index: number }) => React.ReactElement;
    keyExtractor: (item: T, index: number) => string;
  }
  
  function OptimizedFlatList<T>({
    data,
    renderItem,
    keyExtractor,
    ...props
  }: OptimizedFlatListProps<T>) {
    const getItemLayout = useCallback(
      (data: any, index: number) => ({
        length: 100, // 假设每个item高度为100
        offset: 100 * index,
        index
      }),
      []
    );
  
    const memoizedRenderItem = useCallback(
      ({ item, index }: { item: T; index: number }) => renderItem({ item, index }),
      [renderItem]
    );
  
    return (
      <FlatList
        data={data}
        renderItem={memoizedRenderItem}
        keyExtractor={keyExtractor}
        getItemLayout={getItemLayout}
        removeClippedSubviews={true}
        maxToRenderPerBatch={10}
        updateCellsBatchingPeriod={50}
        initialNumToRender={10}
        windowSize={10}
        {...props}
      />
    );
  }
  
  export default memo(OptimizedFlatList) as typeof OptimizedFlatList;
  ```

### 7. 测试与调试

#### 7.1 单元测试
- [ ] **组件测试**
  ```typescript
  // __tests__/components/InputField.test.tsx
  import React from 'react';
  import { render, fireEvent } from '@testing-library/react-native';
  import InputField from '@components/InputField';
  
  describe('InputField', () => {
    it('renders correctly with label', () => {
      const { getByText, getByPlaceholderText } = render(
        <InputField
          label="测试标签"
          placeholder="测试占位符"
        />
      );
  
      expect(getByText('测试标签')).toBeTruthy();
      expect(getByPlaceholderText('测试占位符')).toBeTruthy();
    });
  
    it('shows error message when error prop is provided', () => {
      const { getByText } = render(
        <InputField
          label="测试标签"
          error="测试错误信息"
        />
      );
  
      expect(getByText('测试错误信息')).toBeTruthy();
    });
  
    it('calls onChangeText when text changes', () => {
      const mockOnChangeText = jest.fn();
      const { getByPlaceholderText } = render(
        <InputField
          placeholder="测试占位符"
          onChangeText={mockOnChangeText}
        />
      );
  
      const input = getByPlaceholderText('测试占位符');
      fireEvent.changeText(input, '测试文本');
  
      expect(mockOnChangeText).toHaveBeenCalledWith('测试文本');
    });
  });
  ```

#### 7.2 E2E测试
- [ ] **Detox配置**
  ```json
  // .detoxrc.json
  {
    "testRunner": "jest",
    "runnerConfig": "e2e/config.json",
    "configurations": {
      "ios.sim.debug": {
        "binaryPath": "ios/build/Build/Products/Debug-iphonesimulator/FirstMomentsApp.app",
        "build": "xcodebuild -workspace ios/FirstMomentsApp.xcworkspace -scheme FirstMomentsApp -configuration Debug -sdk iphonesimulator -derivedDataPath ios/build",
        "type": "ios.simulator",
        "device": {
          "avdName": "Pixel_4_API_30"
        }
      }
    }
  }
  ```

- [ ] **E2E测试用例**
  ```typescript
  // e2e/auth.e2e.js
  describe('认证流程', () => {
    beforeAll(async () => {
      await device.launchApp();
    });

    beforeEach(async () => {
      await device.reloadReactNative();
    });

    it('应该能够成功登录', async () => {
      // 等待登录页面加载
      await expect(element(by.text('欢迎回来'))).toBeVisible();
      
      // 输入邮箱和密码
      await element(by.id('email-input')).typeText('test@example.com');
      await element(by.id('password-input')).typeText('password123');
      
      // 点击登录按钮
      await element(by.id('login-button')).tap();
      
      // 验证登录成功
      await expect(element(by.text('首页'))).toBeVisible();
    });

    it('应该显示登录错误信息', async () => {
      await element(by.id('email-input')).typeText('invalid@email.com');
      await element(by.id('password-input')).typeText('wrongpassword');
      await element(by.id('login-button')).tap();
      
      await expect(element(by.text('登录失败'))).toBeVisible();
    });
  });
  ```

### 8. 构建与部署

#### 8.1 构建配置
- [ ] **Android构建配置**
  ```gradle
  // android/app/build.gradle
  android {
    compileSdkVersion rootProject.ext.compileSdkVersion
    
    defaultConfig {
      applicationId "com.firstmoments.app"
      minSdkVersion rootProject.ext.minSdkVersion
      targetSdkVersion rootProject.ext.targetSdkVersion
      versionCode 1
      versionName "1.0.0"
      multiDexEnabled true
    }
    
    signingConfigs {
      release {
        if (project.hasProperty('MYAPP_RELEASE_STORE_FILE')) {
          storeFile file(MYAPP_RELEASE_STORE_FILE)
          storePassword MYAPP_RELEASE_STORE_PASSWORD
          keyAlias MYAPP_RELEASE_KEY_ALIAS
          keyPassword MYAPP_RELEASE_KEY_PASSWORD
        }
      }
    }
    
    buildTypes {
      debug {
        signingConfig signingConfigs.debug
      }
      release {
        signingConfig signingConfigs.release
        minifyEnabled enableProguardInReleaseBuilds
        proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
      }
    }
  }
  ```

- [ ] **iOS构建配置**
  ```xml
  <!-- ios/FirstMomentsApp/Info.plist -->
  <key>CFBundleDisplayName</key>
  <string>初见</string>
  <key>CFBundleIdentifier</key>
  <string>com.firstmoments.app</string>
  <key>CFBundleVersion</key>
  <string>1</string>
  <key>CFBundleShortVersionString</key>
  <string>1.0.0</string>
  
  <!-- 权限配置 -->
  <key>NSLocationWhenInUseUsageDescription</key>
  <string>初见需要访问您的位置来记录足迹</string>
  <key>NSCameraUsageDescription</key>
  <string>初见需要访问相机来拍摄照片</string>
  <key>NSPhotoLibraryUsageDescription</key>
  <string>初见需要访问相册来选择照片</string>
  ```

#### 8.2 自动化构建
- [ ] **Fastlane配置**
  ```ruby
  # fastlane/Fastfile
  default_platform(:ios)
  
  platform :ios do
    desc "构建并上传到TestFlight"
    lane :beta do
      increment_build_number(xcodeproj: "FirstMomentsApp.xcodeproj")
      build_app(workspace: "FirstMomentsApp.xcworkspace", scheme: "FirstMomentsApp")
      upload_to_testflight
    end
  end
  
  platform :android do
    desc "构建并上传到Google Play Console"
    lane :beta do
      gradle(task: "clean assembleRelease")
      upload_to_play_store(track: "beta")
    end
  end
  ```

## 交付成果

### 主要交付物
1. **完整的移动端应用**
   - iOS和Android原生应用
   - 完整的用户界面实现
   - 所有核心功能模块

2. **源代码和文档**
   - 完整的前端源代码
   - 组件库和工具函数
   - API接口文档
   - 部署和构建文档

3. **测试版本**
   - 内测版本（TestFlight/内部测试）
   - 功能测试报告
   - 性能测试报告

### 技术规范
- **代码质量**：ESLint检查通过率 > 95%
- **测试覆盖率**：单元测试覆盖率 > 80%
- **性能指标**：应用启动时间 < 3秒
- **兼容性**：iOS 12+, Android 8.0+

## 质量保证

### 代码质量
- [ ] **代码审查流程**
  - 所有代码必须经过同行评审
  - 遵循团队编码规范
  - 通过自动化代码质量检查

- [ ] **自动化测试**
  - 单元测试覆盖率达到80%以上
  - 集成测试覆盖主要业务流程
  - E2E测试覆盖关键用户路径

### 性能优化
- [ ] **应用性能**
  - 启动时间优化（< 3秒）
  - 内存使用优化（< 200MB）
  - 网络请求优化（缓存策略）

- [ ] **用户体验**
  - 界面响应时间（< 100ms）
  - 动画流畅度（60fps）
  - 离线功能支持

## 风险控制

### 技术风险
1. **第三方依赖风险**
   - 定期更新依赖包版本
   - 监控安全漏洞
   - 备选方案准备

2. **性能风险**
   - 持续性能监控
   - 内存泄漏检测
   - 崩溃率监控

3. **兼容性风险**
   - 多设备测试
   - 系统版本兼容性测试
   - 网络环境适配

### 进度风险
1. **开发进度延期**
   - 每日站会跟踪进度
   - 及时调整开发计划
   - 关键路径优先级管理

2. **质量风险**
   - 持续集成和部署
   - 自动化测试覆盖
   - 用户反馈快速响应

---

**下一阶段**：测试与优化阶段
**预计完成时间**：第5月底
**关键里程碑**：完成所有核心功能开发，通过内部测试验收: {
          "type": "iPhone 14"
        }
      },
      "android.emu.debug": {
        "binaryPath": "android/app/build/outputs/apk/debug/app-debug.apk",
        "build": "cd android && ./gradlew assembleDebug assembleAndroidTest -DtestBuildType=debug && cd ..",
        "type": "android.emulator",
        "device